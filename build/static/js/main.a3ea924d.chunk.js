(this.webpackJsonpseenit=this.webpackJsonpseenit||[]).push([[0],{161:function(e,t,s){},478:function(e,t,s){},479:function(e,t,s){"use strict";s.r(t);var i=s(2),c=s(4),a=s(28),n=s.n(a),o=(s(161),s(10)),r=s(95);r.a.initializeApp({apiKey:"AIzaSyCCvSz6NSkMPzmMbt0d90d9SXeJdazGVww",authDomain:"seenit-bfe8f.firebaseapp.com",databaseURL:"https://seenit-bfe8f-default-rtdb.firebaseio.com",projectId:"seenit-bfe8f",storageBucket:"seenit-bfe8f.appspot.com",messagingSenderId:"636830494102",appId:"1:636830494102:web:b51599d4d380e001c701b7",measurementId:"G-1FVVW1Q9WY"});var l=r.a.database();var j=function(e){var t="Image of cover for "+e.title,s=Object(c.useState)(!1),a=Object(o.a)(s,2),n=a[0],r=a[1];Object(c.useEffect)((function(){j(e.title)}));var j=function(t){null!=e.googleObj&&l.ref().child("users/".concat(e.googleObj.googleId,"/movies")).orderByChild("title").equalTo(t).limitToFirst(1).once("child_added",(function(e){t===e.val().title?r(!0):r(!1)}))};return Object(i.jsxs)("div",{className:"movie",children:[Object(i.jsx)("img",{src:e.url,alt:t,className:"moviePoster"}),Object(i.jsx)("a",{href:e.url,children:Object(i.jsx)("div",{className:"overlay",children:Object(i.jsx)("div",{className:"movieText",children:e.title})})}),Object(i.jsx)("div",{children:n?Object(i.jsx)("button",{className:"databaseButton",onClick:function(){return t=e.title,e.id?l.ref("/users/".concat(e.googleObj.googleId,"/movies/").concat(e.id)).remove():l.ref().child("users/".concat(e.googleObj.googleId,"/movies")).orderByChild("title").equalTo(t).limitToFirst(1).once("child_added",(function(s){t===s.val().title&&l.ref("/users/".concat(e.googleObj.googleId,"/movies/").concat(s.key)).remove()})),void r(!1);var t},children:"Delete from Favorite Movies"}):Object(i.jsx)("button",{className:"databaseButton",onClick:function(){null==e.googleObj||n?console.log("object null"):(l.ref("/users/".concat(e.googleObj.googleId,"/movies")).push({title:e.title,img:e.url}),r(!0))},children:" Add to Favorite Movies"})})]})},d=function(e){return Object(i.jsxs)("div",{className:"movieList-container",children:[Object(i.jsx)("div",{className:"movieListTitle-container",children:Object(i.jsx)("div",{className:"movieListTitle",children:e.listName})}),Object(i.jsx)("div",{className:"movie-container",children:e.movieList.map((function(t){return Object(i.jsx)(j,{id:t.id,url:t.url,title:t.title,googleObj:e.googleObj},t.key)}))})]})},b=s.p+"static/media/logo.004d2315.png",u=s(37);var v=function(e){return Object(i.jsxs)("div",{className:"heading",children:[Object(i.jsx)("div",{className:"headingColimg",children:Object(i.jsx)(u.b,{to:"/",className:"link",children:Object(i.jsx)("img",{className:"Logo",src:b,height:"140"})})}),Object(i.jsxs)("div",{className:"headingCol",children:[Object(i.jsx)("h1",{className:"title",children:"SeenIt"}),Object(i.jsx)("p",{className:"subheading",children:"The Social Movie Network in React"})]}),Object(i.jsx)("div",{className:"headingCol",children:Object(i.jsx)("p",{className:"headingText",children:Object(i.jsx)(u.b,{to:"/Movie",className:"link",children:"Go to Movie Page Test"})})}),Object(i.jsx)("div",{className:"headingCol",children:Object(i.jsx)("p",{className:"headingText",children:Object(i.jsx)(u.b,{to:"/Search",className:"link",children:"Search for a movie"})})}),Object(i.jsx)("div",{className:"headingCol",children:e.status?Object(i.jsx)("p",{className:"headingText",children:Object(i.jsx)(u.b,{to:"/User",className:"link",children:"View Profile"})}):Object(i.jsx)("p",{className:"headingText",children:"Log in to view profile"})})]})},g=function(e){var t=Object(c.useState)([{key:1,title:"La La Land",url:"https://upload.wikimedia.org/wikipedia/en/a/ab/La_La_Land_%28film%29.png"},{key:2,title:"Your Name",url:"https://upload.wikimedia.org/wikipedia/en/0/0b/Your_Name_poster.png"},{key:3,title:"Interstellar",url:"https://upload.wikimedia.org/wikipedia/en/b/bc/Interstellar_film_poster.jpg"}]),s=Object(o.a)(t,2),a=s[0];s[1];return Object(i.jsx)("div",{children:Object(i.jsx)(d,{movieList:a,listName:"Top User-Rated Movies",googleObj:e.googleObj})})},O=s(68),h=s(47),m=s.n(h),x=s(69);var f=function(e){return Object(i.jsx)("div",{children:Object(i.jsx)(O.GoogleLogin,{clientId:"134504818403-38geof8pro5f1bt8m8g8dsll2r0kdjtt.apps.googleusercontent.com",buttonText:"Login",onSuccess:function(t){console.log("Login Success: currentUser:",t.profileObj),function(e){var t=1e3*(e.tokenObj.expires_in||3300),s=function(){var i=Object(x.a)(m.a.mark((function i(){var c;return m.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,e.reloadAuthResponse();case 2:c=i.sent,t=1e3*(c.expires_in||3300),console.log("newAuthRes:",c),localStorage.setItem("authToken",c.id_token),setTimeout(s,t);case 7:case"end":return i.stop()}}),i)})));return function(){return i.apply(this,arguments)}}();setTimeout(s,t)}(t),e.setLoggedIn(!0),e.setGoogleObj(t.profileObj),e.setName(t.profileObj.name),e.setURL(t.profileObj.imageUrl)},onFailure:function(e){console.log("Login failed: res:",e),alert("Failed to login \ud83d\ude22. Please try again")},cookiePolicy:"single_host_origin",isSignedIn:!0})})},p=function(){return Object(i.jsx)("div",{children:Object(i.jsx)(f,{})})};var N=function(e){return Object(i.jsx)("div",{children:Object(i.jsx)(O.GoogleLogout,{clientId:"134504818403-38geof8pro5f1bt8m8g8dsll2r0kdjtt.apps.googleusercontent.com",buttonText:"Logout",onLogoutSuccess:function(){console.log("Logout made successfully"),e.setLoggedIn(!1)}})})};var w=function(){return Object(i.jsxs)("div",{className:"AboutMe",children:[Object(i.jsx)("h3",{children:"About Me"}),Object(i.jsx)("p",{children:"User Bio Here"})]})},L=function(e){return Object(i.jsx)("div",{id:"ReviewContainerShadow",children:Object(i.jsx)("div",{className:"ReviewContainer",children:Object(i.jsxs)("div",{className:"Review",children:[Object(i.jsx)("h2",{children:e.movieTitle?e.movieTitle:e.user}),Object(i.jsx)("q",{className:"ReviewContent",children:e.reviewContent}),Object(i.jsxs)("p",{className:"stars",children:["Stars: ",e.stars]})]})})})},S=function(e){var t=Object(c.useState)([]),s=Object(o.a)(t,2),a=s[0],n=s[1];return Object(c.useEffect)((function(){return l.ref("users/".concat(e.googleObj.googleId,"/movieReviews")).on("value",(function(e){var t=[];null!=e&&e.forEach((function(e){var s={id:e.key,movieTitle:e.val().movie,reviewContent:e.val().review,stars:5};t.push(s)})),n(a.concat(t))}))}),[]),Object(i.jsxs)("div",{className:"ReviewList",children:[Object(i.jsx)("div",{className:"movieListTitle",children:"My Recent Reviews"}),a.map((function(e){return Object(i.jsx)(L,{movieTitle:e.movieTitle,reviewContent:e.reviewContent,stars:e.stars})}))]})};var k=function(e){var t=Object(c.useState)([]),s=Object(o.a)(t,2),a=s[0],n=s[1];return Object(c.useEffect)((function(){return l.ref("users/".concat(e.googleObj.googleId,"/movies")).on("value",(function(e){var t=[];null!=e&&e.forEach((function(e){var s={id:e.key,title:e.val().title,url:e.val().img};t.push(s)})),n(a.concat(t))}))}),[]),Object(i.jsxs)("div",{class:"UserPageFlex",children:[Object(i.jsxs)("div",{className:"user",children:[Object(i.jsx)("img",{className:"GooglePic",src:e.googleObj.imageUrl}),Object(i.jsx)("h3",{style:{fontSize:"40px"},children:e.googleObj.name}),Object(i.jsx)(w,{})]}),Object(i.jsxs)("div",{className:"UserContent",children:[Object(i.jsx)("div",{className:"MyMovies",children:Object(i.jsx)(d,{listName:"My Favorite Movies",googleObj:e.googleObj,movieList:a})}),Object(i.jsx)("br",{}),Object(i.jsx)("div",{className:"MyReviews",children:Object(i.jsx)(S,{googleObj:e.googleObj})})]})]})},y=function(e){var t=Object(c.useState)(""),s=Object(o.a)(t,2),a=s[0],n=s[1],r=Object(c.useState)([]),j=Object(o.a)(r,2),d=j[0],b=j[1];return Object(c.useEffect)((function(){return l.ref("movieReviews/lalaland").on("value",(function(e){var t=[];null!=e&&e.forEach((function(e){var s={id:e.key,user:e.val().user.givenName+" "+e.val().user.familyName,movieTitle:"La la land",reviewContent:e.val().review,stars:5};t.push(s)})),b(d.concat(t))}))}),[]),Object(i.jsxs)("div",{className:"MoviePageFlex",children:[Object(i.jsx)("div",{className:"MovieImage",children:Object(i.jsx)("img",{src:"https://images-na.ssl-images-amazon.com/images/I/61pVLV%2Bz11L._AC_SL1162_.jpg",alt:"Movie Poster",className:"MoviePagePoster"})}),Object(i.jsxs)("div",{className:"MovieContent",children:[Object(i.jsx)("h1",{children:"La La Land"}),Object(i.jsx)("p",{children:"While navigating their careers in Los Angeles, a pianist and an actress fall in love while attempting to reconcile their aspirations for the future."}),Object(i.jsxs)("h2",{children:["Director:\xa0",Object(i.jsx)("span",{children:"Joe Director"})]}),Object(i.jsxs)("h2",{children:["Writer:\xa0",Object(i.jsx)("span",{children:"Joe Writer"})]}),Object(i.jsxs)("h2",{children:["Starring:\xa0",Object(i.jsx)("span",{children:"Ryan Gosling"})]}),Object(i.jsxs)("div",{children:[Object(i.jsx)("div",{children:Object(i.jsx)("h1",{children:"Write a review"})}),Object(i.jsx)("div",{className:"WriteReviewContainer",children:Object(i.jsxs)("div",{className:"WriteReview",children:[Object(i.jsx)("textarea",{className:"textarea",name:"text",wrap:"soft",onChange:function(e){n(e.target.value)},value:a}),Object(i.jsx)("button",{className:"AddReviewButton",onClick:function(){null!=e.googleObj?(l.ref("/users/".concat(e.googleObj.googleId,"/movieReviews")).push({movie:"La la Land",review:a}),l.ref("/movieReviews/lalaland").push({user:e.googleObj,review:a}),n("")):console.log("object null")},children:" Save Review "})]})}),Object(i.jsx)("br",{}),Object(i.jsx)("div",{children:Object(i.jsx)("h1",{children:"All reviews"})}),d.map((function(e){return Object(i.jsx)(L,{user:e.user,reviewContent:e.reviewContent,stars:e.stars})}))]})]})]})},I=s(154),C=s.n(I),T=function(e){var t=e.title,s=e.poster_path,c=(e.overview,e.vote_average);return Object(i.jsxs)("div",{className:"movie",children:[Object(i.jsx)("img",{src:"https://image.tmdb.org/t/p/w1280"+s,alt:t}),Object(i.jsxs)("div",{className:"movie-info",children:[Object(i.jsxs)("h3",{children:[" ",t," "]}),Object(i.jsx)("span",{children:c})]})]})},M=function(e){var t=e.alert;return Object(i.jsx)("div",{className:"alert",children:Object(i.jsx)("h3",{children:t})})},_=function(e){var t=Object(c.useState)(""),s=Object(o.a)(t,2),a=s[0],n=s[1],r=Object(c.useState)([]),l=Object(o.a)(r,2),j=l[0],d=l[1],b=Object(c.useState)(""),u=Object(o.a)(b,2),v=u[0],g=u[1],O=Object(c.useState)(!1),h=Object(o.a)(O,2),f=h[0],p=h[1],N="https://api.themoviedb.org/3/search/movie?api_key=78fcb8fa5df23ceee859f6258985efc4&query="+a;console.log(N);var w=function(){var e=Object(x.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===a){e.next=18;break}return console.log("The query submitted is: "+a),e.next=4,C.a.get(N);case 4:if((t=e.sent).data.results!==[]){e.next=9;break}return g("No movie with such name"),console.log("No movie found"),e.abrupt("return",null);case 9:console.log(t.data.results),console.log(t.data.results[0]),d(t.data.results),p(!0),console.log(j),n(""),g(""),e.next=19;break;case 18:g("Please fill out the form");case 19:return e.abrupt("return",null);case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.jsxs)("div",{className:"Search Page",children:[Object(i.jsx)("h1",{children:"Search for Movies"}),Object(i.jsxs)("form",{onSubmit:function(e){e.preventDefault(),a&&(w(),n(""))},className:"search-form",children:[""!==v&&Object(i.jsx)(M,{alert:v}),Object(i.jsx)("input",{type:"text",name:"query",onChange:function(e){n(e.target.value)},value:a,autoComplete:"off",placeholder:"Search Movies"}),Object(i.jsx)("input",{type:"submit",value:"Search"})]}),Object(i.jsx)("div",{className:"search-results-container",children:f?j.map((function(e){return Object(i.jsx)(T,{title:e.title,poster_path:e.poster_path,overview:e.overview,vote_average:e.vote_average})})):Object(i.jsx)("p",{children:"Please search for a movie above!"})})]})},R=s(11);s(185),s(478);var P=function(){var e=Object(c.useState)(!1),t=Object(o.a)(e,2),s=t[0],a=t[1],n=Object(c.useState)(),r=Object(o.a)(n,2),l=r[0],j=r[1],d=Object(c.useState)(),b=Object(o.a)(d,2),O=(b[0],b[1],Object(c.useState)()),h=Object(o.a)(O,2);return h[0],h[1],Object(i.jsxs)(u.a,{children:[Object(i.jsxs)("div",{className:"login-buttons",children:[s?Object(i.jsx)(N,{loggedIn:s,setLoggedIn:function(e){return a(e)},setGoogleObj:function(e){return j(e)}}):Object(i.jsx)(f,{loggedIn:s,setLoggedIn:function(e){return a(e)},setGoogleObj:function(e){return j(e)}}),Object(i.jsxs)("p",{children:["\xa0 ",l?"Welcome ".concat(l.name,"!"):"Not logged in. Please log in.","\xa0"]})]}),Object(i.jsx)(v,{status:s}),Object(i.jsxs)(R.c,{children:[Object(i.jsx)(R.a,{exact:!0,path:"/",children:Object(i.jsx)(g,{googleObj:l})}),Object(i.jsx)(R.a,{exact:!0,path:"/Movie",children:l?Object(i.jsx)(y,{googleObj:l}):Object(i.jsx)("p",{})}),Object(i.jsx)(R.a,{exact:!0,path:"/Login",component:p}),Object(i.jsx)(R.a,{exact:!0,path:"/User",children:l?Object(i.jsx)(k,{googleObj:l}):Object(i.jsx)("p",{})}),Object(i.jsx)(R.a,{exact:!0,path:"/Search",component:_})]})]})};n.a.render(Object(i.jsx)(P,{}),document.getElementById("root"))}},[[479,1,2]]]);
//# sourceMappingURL=main.a3ea924d.chunk.js.map