(this.webpackJsonpseenit=this.webpackJsonpseenit||[]).push([[0],{47:function(e,t,s){},73:function(e,t,s){},74:function(e,t,s){"use strict";s.r(t);var c=s(2),i=s(3),a=s(40),n=s.n(a),o=(s(47),s(6)),r=s(10),l=s.n(r),j=s(16),d=s(20),b=s(30);b.a.initializeApp({apiKey:"AIzaSyCCvSz6NSkMPzmMbt0d90d9SXeJdazGVww",authDomain:"seenit-bfe8f.firebaseapp.com",databaseURL:"https://seenit-bfe8f-default-rtdb.firebaseio.com",projectId:"seenit-bfe8f",storageBucket:"seenit-bfe8f.appspot.com",messagingSenderId:"636830494102",appId:"1:636830494102:web:b51599d4d380e001c701b7",measurementId:"G-1FVVW1Q9WY"});var u=b.a.database(),v=s.p+"static/media/poster_not_found.be05f963.png";var O=function(e){var t="Image of cover for "+e.title,s=Object(i.useState)(!1),a=Object(o.a)(s,2),n=a[0],r=a[1],l=Object(i.useState)(),j=Object(o.a)(l,2),b=j[0],O=j[1];Object(i.useEffect)((function(){g(e.API_id);var t="https://image.tmdb.org/t/p/w1280"+e.url;null==e.url?O(v):O(t)}),[]);var g=function(t){null!=e.googleObj&&u.ref().child("users/".concat(e.googleObj.googleId,"/movies")).orderByChild("API_id").equalTo(t).limitToFirst(1).once("child_added",(function(e){t===e.val().API_id?r(!0):r(!1)}))};return Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{className:"movie",children:[Object(c.jsx)("img",{src:b,alt:t,className:"moviePoster"}),Object(c.jsx)(d.b,{to:"/Movie",onClick:function(){e.setAPI_id(e.API_id)},children:Object(c.jsx)("div",{className:"overlay",children:Object(c.jsx)("div",{className:"movieText",children:e.title})})})]}),Object(c.jsx)("div",{children:n?Object(c.jsx)("button",{className:"databaseButton",onClick:function(){return t=e.db_key,void u.ref("/users/".concat(e.googleObj.googleId,"/movies/").concat(t)).remove();var t},children:"Delete from Favorite Movies"}):Object(c.jsx)("button",{className:"databaseButton",onClick:function(){null==e.googleObj||n?console.log("object null"):(u.ref("/users/".concat(e.googleObj.googleId,"/movies")).push({API_id:e.API_id,title:e.title,img:e.url}),r(!0))},children:" Add to Favorite Movies"})}),Object(c.jsx)("br",{})]})},g=function(e){return Object(c.jsxs)("div",{className:"movieList-container",children:[Object(c.jsx)("div",{className:"movieListTitle-container",children:Object(c.jsx)("div",{className:"movieListTitle",children:e.listName})}),Object(c.jsx)("br",{}),Object(c.jsx)("div",{className:"movie-container",children:e.movieList.map((function(t){return Object(c.jsx)(O,{db_key:t.db_key,API_id:t.id,url:t.poster_path,title:t.title,googleObj:e.googleObj,setAPI_id:e.setAPI_id})}))})]})},h=s(18),f=s.n(h),m="78fcb8fa5df23ceee859f6258985efc4",p="https://api.themoviedb.org/3/trending/movie/day?api_key="+m,x="https://api.themoviedb.org/3/trending/movie/week?api_key="+m,_="https://api.themoviedb.org/3/movie/now_playing?api_key="+m+"&language=en-US&page=1",I="https://api.themoviedb.org/3/movie/top_rated?api_key="+m+"&language=en-US&page=1&region=US",N=function(e){var t=Object(i.useState)([]),s=Object(o.a)(t,2),a=s[0],n=s[1],r=Object(i.useState)([]),d=Object(o.a)(r,2),b=d[0],u=d[1],v=Object(i.useState)([]),O=Object(o.a)(v,2),h=O[0],m=O[1],N=Object(i.useState)([]),w=Object(o.a)(N,2),y=w[0],P=w[1];function k(){return(k=Object(j.a)(l.a.mark((function e(){var t,s,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get(p);case 2:for(t=e.sent,s=[],c=0;c<14;c++)t.data.results[c]&&s.push(t.data.results[c]);n(s);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return(S=Object(j.a)(l.a.mark((function e(){var t,s,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get(x);case 2:for(t=e.sent,s=[],c=0;c<14;c++)t.data.results[c]&&s.push(t.data.results[c]);u(s);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return(A=Object(j.a)(l.a.mark((function e(){var t,s,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get(_);case 2:for(t=e.sent,s=[],c=0;c<14;c++)t.data.results[c]&&s.push(t.data.results[c]);m(s);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return(C=Object(j.a)(l.a.mark((function e(){var t,s,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get(I);case 2:for(t=e.sent,s=[],c=0;c<14;c++)t.data.results[c]&&s.push(t.data.results[c]);P(s);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(i.useEffect)((function(){!function(){k.apply(this,arguments)}(),function(){S.apply(this,arguments)}(),function(){A.apply(this,arguments)}(),function(){C.apply(this,arguments)}()}),[]),Object(c.jsxs)("div",{children:[Object(c.jsx)(g,{movieList:h,listName:"Now Playing in the US",googleObj:e.googleObj,setAPI_id:e.setAPI_id}),Object(c.jsx)("br",{}),Object(c.jsx)(g,{movieList:y,listName:"Top Rated Movies",googleObj:e.googleObj,setAPI_id:e.setAPI_id}),Object(c.jsx)("br",{}),Object(c.jsx)(g,{movieList:a,listName:"Trending Today",googleObj:e.googleObj,setAPI_id:e.setAPI_id}),Object(c.jsx)("br",{}),Object(c.jsx)(g,{movieList:b,listName:"Trending This Week",googleObj:e.googleObj,setAPI_id:e.setAPI_id}),Object(c.jsx)("br",{})]})},w=s.p+"static/media/logo.004d2315.png",y=s(24);var P=function(e){return Object(c.jsx)("div",{children:Object(c.jsx)(y.GoogleLogin,{clientId:"134504818403-t4rj4robf4vckhm3tso4v6gmkcmfbtqv.apps.googleusercontent.com",buttonText:"Login",onSuccess:function(t){console.log("Login Success: currentUser:",t.profileObj),function(e){var t=1e3*(e.tokenObj.expires_in||3300),s=function(){var c=Object(j.a)(l.a.mark((function c(){var i;return l.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,e.reloadAuthResponse();case 2:i=c.sent,t=1e3*(i.expires_in||3300),console.log("newAuthRes:",i),localStorage.setItem("authToken",i.id_token),setTimeout(s,t);case 7:case"end":return c.stop()}}),c)})));return function(){return c.apply(this,arguments)}}();setTimeout(s,t)}(t),e.setLoggedIn(!0),e.setGoogleObj(t.profileObj)},onFailure:function(e){console.log("Login failed: res:",e),alert("Failed to login \ud83d\ude22. Please try again")},cookiePolicy:"single_host_origin",isSignedIn:!0})})};var k=function(e){return Object(c.jsx)("div",{children:Object(c.jsx)(y.GoogleLogout,{clientId:"134504818403-t4rj4robf4vckhm3tso4v6gmkcmfbtqv.apps.googleusercontent.com",buttonText:"Logout",onLogoutSuccess:function(){console.log("Logout made successfully"),e.setLoggedIn(!1)}})})};var S=function(e){return Object(c.jsx)("div",{id:"ReviewContainerShadow",children:Object(c.jsx)("div",{className:"ReviewContainer",children:Object(c.jsxs)("div",{className:"Review",children:[Object(c.jsx)("h2",{children:e.db_key?e.movieTitle:e.user}),Object(c.jsx)("q",{className:"ReviewContent",children:e.reviewContent}),Object(c.jsx)("br",{}),Object(c.jsx)("br",{}),Object(c.jsx)("div",{children:e.db_key?Object(c.jsx)("button",{className:"reviewButton",onClick:function(){return t=e.db_key,s=e.db_key_2,u.ref("/users/".concat(e.googleObj.googleId,"/movieReviews/").concat(t)).remove(),void u.ref("/movieReviews/".concat(e.API_id,"/").concat(s)).remove();var t,s},children:" Delete review "}):null}),Object(c.jsx)("br",{})]})})})},A=function(e){var t=Object(i.useState)([]),s=Object(o.a)(t,2),a=s[0],n=s[1];return Object(i.useEffect)((function(){return u.ref("users/".concat(e.googleObj.googleId,"/movieReviews")).on("value",(function(e){var t=[];null!=e&&e.forEach((function(e){var s={db_key:e.key,db_key_2:e.val().db_key_2,API_id:e.val().API_id,title:e.val().title,reviewContent:e.val().review};t.push(s)})),n(t)}))}),[]),Object(c.jsxs)("div",{className:"ReviewList",children:[Object(c.jsx)("div",{className:"movieListTitle",children:"My Recent Reviews"}),a.map((function(t){return Object(c.jsx)(S,{googleObj:e.googleObj,db_key:t.db_key,db_key_2:t.db_key_2,API_id:t.API_id,movieTitle:t.title,reviewContent:t.reviewContent})}))]})},C=function(e){var t=Object(i.useState)([]),s=Object(o.a)(t,2),a=s[0],n=s[1];return Object(i.useEffect)((function(){return u.ref("users/".concat(e.googleObj.googleId,"/movies")).on("value",(function(e){var t=[];null!=e&&e.forEach((function(e){var s={db_key:e.key,title:e.val().title,poster_path:e.val().img,id:e.val().API_id};t.push(s)})),n(t)}))}),[]),Object(c.jsxs)("div",{className:"UserPageFlex",children:[Object(c.jsxs)("div",{className:"user",children:[Object(c.jsx)("img",{className:"GooglePic",src:e.googleObj.imageUrl,alt:"Your Profile Icon"}),Object(c.jsx)("h3",{style:{fontSize:"40px"},children:e.googleObj.name})]}),Object(c.jsxs)("div",{className:"UserContent",children:[Object(c.jsx)("div",{className:"MyMovies",children:Object(c.jsx)(g,{listName:"My Favorite Movies",googleObj:e.googleObj,movieList:a,setAPI_id:e.setAPI_id})}),Object(c.jsx)("br",{}),Object(c.jsx)("div",{className:"MyReviews",children:Object(c.jsx)(A,{googleObj:e.googleObj})})]})]})},R="78fcb8fa5df23ceee859f6258985efc4",L="https://image.tmdb.org/t/p/w1280",M=function(e){var t=Object(i.useState)(""),s=Object(o.a)(t,2),a=s[0],n=s[1],r=Object(i.useState)([]),d=Object(o.a)(r,2),b=d[0],O=d[1],g=Object(i.useState)([]),h=Object(o.a)(g,2),m=h[0],p=h[1],x=Object(i.useState)(""),_=Object(o.a)(x,2),I=_[0],N=_[1],w=Object(i.useState)(""),y=Object(o.a)(w,2),P=y[0],k=y[1],A=Object(i.useState)(),C=Object(o.a)(A,2),M=C[0],T=C[1];return Object(i.useEffect)((function(){var t=e.API_id;if(e.API_id);else if(sessionStorage.hasOwnProperty("API_id")){console.log("Retrieving API_id from session");var s=sessionStorage.getItem("API_id");t=s=JSON.parse(s)}var c=JSON.stringify(t);sessionStorage.setItem("API_id",c);var i="https://api.themoviedb.org/3/movie/"+t+"?api_key="+R,a="https://api.themoviedb.org/3/movie/"+t+"/credits?api_key="+R;function n(){return(n=Object(j.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get(i);case 2:null!==(t=e.sent)&&(console.log("Movie info successfully found"),p(t.data),null==t.data.poster_path?T(v):T(L+t.data.poster_path));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function o(){return(o=Object(j.a)(l.a.mark((function e(){var t,s,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get(a);case 2:for(t=e.sent,s=t.data.crew,c=0;c<s.length;c++)"Director"==s[c].job&&N(s[c]),"Writer"!=s[c].job&&"Screenplay"!=s[c].job||k(s[c]);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){n.apply(this,arguments)}(),function(){o.apply(this,arguments)}(),u.ref("movieReviews/".concat(t)).on("value",(function(e){var t=[];null!=e&&e.forEach((function(e){var s={key:e.key,API_id:e.val().API_id,user:e.val().user.givenName+" "+e.val().user.familyName,reviewContent:e.val().review,stars:5};t.push(s)})),O(t)}))}),[]),Object(c.jsxs)("div",{children:[Object(c.jsx)("br",{}),Object(c.jsxs)("div",{className:"MoviePageFlex",children:[Object(c.jsx)("div",{className:"MovieImage",children:Object(c.jsx)("img",{src:M,alt:"Movie Poster of "+m.title,className:"MoviePagePoster"})}),Object(c.jsxs)("div",{className:"MovieContent",children:[Object(c.jsxs)("h1",{children:[Object(c.jsx)("span",{className:"MovieTitle",children:m.title}),Object(c.jsx)("div",{children:Object(c.jsxs)("span",{className:"MovieRelease",children:["(",m.release_date,")"]})})]}),Object(c.jsx)("p",{className:"overview",children:m.overview}),Object(c.jsx)("h1",{className:"MovieCredits",children:"Credits"}),Object(c.jsxs)("h2",{children:["Director:\xa0",Object(c.jsx)("span",{children:I.name})]}),Object(c.jsxs)("h2",{children:["Screenplay/Writer:\xa0",Object(c.jsx)("span",{children:P.name})]}),Object(c.jsx)("br",{}),Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{children:0===b.length?Object(c.jsx)("h1",{children:"Write the First Review"}):Object(c.jsx)("h1",{children:"Write a Review"})}),Object(c.jsx)("div",{className:"WriteReviewContainer",children:Object(c.jsxs)("div",{className:"WriteReview",children:[Object(c.jsx)("textarea",{className:"textarea",name:"text",wrap:"soft",onChange:function(e){n(e.target.value)},value:a}),Object(c.jsx)("br",{}),Object(c.jsx)("button",{className:"AddReviewButton",onClick:function(){if(null!=e.googleObj){var t=u.ref("/movieReviews/".concat(e.API_id)).push({API_id:e.API_id,user:e.googleObj,review:a}).key;u.ref("/users/".concat(e.googleObj.googleId,"/movieReviews")).push({db_key_2:t,API_id:e.API_id,title:m.title,review:a}),n("")}else console.log("object null")},children:" Save Review "})]})}),Object(c.jsx)("br",{}),Object(c.jsx)("div",{children:0===b.length?Object(c.jsx)("h1",{children:"No Reviews Found"}):Object(c.jsx)("h1",{children:"All Reviews"})}),b.map((function(e){return Object(c.jsx)(S,{API_id:m.id,user:e.user,reviewContent:e.reviewContent,stars:e.stars})}))]})]})]})]})},T=function(e){var t=e.alert;return Object(c.jsx)("div",{className:"alert",children:Object(c.jsx)("h3",{children:t})})},F=function(e){var t=Object(i.useState)(""),s=Object(o.a)(t,2),a=s[0],n=s[1],r=Object(i.useState)([]),d=Object(o.a)(r,2),b=d[0],u=d[1],v=Object(i.useState)(""),O=Object(o.a)(v,2),h=O[0],m=O[1],p=Object(i.useState)(!1),x=Object(o.a)(p,2),_=x[0],I=x[1],N="https://api.themoviedb.org/3/search/movie?api_key=78fcb8fa5df23ceee859f6258985efc4&query="+a,w=function(){var e=Object(j.a)(l.a.mark((function e(){var t,s,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===a){e.next=19;break}return console.log("The query submitted is: "+a),e.next=4,f.a.get(N);case 4:if(t=e.sent,console.log(t.data.results),t.data.results!==[]){e.next=10;break}return m("No movie with such name"),console.log("No movie found"),e.abrupt("return",null);case 10:for(s=[],c=0;c<10;c++)t.data.results[c]&&s.push(t.data.results[c]);u([]),u([].concat(s)),I(!0),n(""),m(""),e.next=20;break;case 19:m("Please fill out the form");case 20:return e.abrupt("return",null);case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.jsxs)("div",{className:"SearchPage",children:[Object(c.jsx)("h1",{children:"Search for Movies"}),Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault(),a&&(w(),n(""))},className:"search-form",children:[""!==h&&Object(c.jsx)(T,{alert:h}),Object(c.jsx)("input",{type:"text",name:"query",onChange:function(e){n(e.target.value)},value:a,autoComplete:"off",placeholder:"Search Movies",className:"textInput"}),"\xa0\xa0\xa0",Object(c.jsx)("input",{type:"submit",value:"Search",className:"searchButton"})]}),Object(c.jsx)("div",{className:"search-results-container",children:_?Object(c.jsx)(g,{googleObj:e.googleObj,listName:"Search Results",movieList:b,setAPI_id:e.setAPI_id}):Object(c.jsx)("p",{children:"Please search for a movie above!"})})]})},U=s(9);s(73);var W=function(){var e=Object(i.useState)(!1),t=Object(o.a)(e,2),s=t[0],a=t[1],n=Object(i.useState)(),r=Object(o.a)(n,2),l=r[0],j=r[1],b=Object(i.useState)(),u=Object(o.a)(b,2),v=u[0],O=u[1];return Object(c.jsxs)(d.a,{children:[Object(c.jsxs)("div",{className:"navbar",children:[Object(c.jsx)("div",{className:"headingColimg",children:Object(c.jsx)(d.b,{to:"/",className:"link",children:Object(c.jsx)("img",{className:"Logo",src:w,height:"100",alt:"SeenIt logo"})})}),Object(c.jsxs)("div",{className:"headingCol",children:[Object(c.jsx)("h1",{className:"title",children:"SeenIt"}),Object(c.jsx)("p",{className:"subheading",children:"The Social Movie Network in React"})]}),Object(c.jsx)("div",{className:"headingCol",children:Object(c.jsx)("p",{className:"headingText",children:Object(c.jsx)(d.b,{to:"/Search",className:"link",children:"Search for a movie"})})}),Object(c.jsx)("div",{className:"headingCol",children:s?Object(c.jsx)("p",{className:"headingText",children:Object(c.jsx)(d.b,{to:"/User",className:"link",children:"View Profile"})}):Object(c.jsx)("p",{className:"headingText",children:"Log in to view profile"})}),Object(c.jsx)("div",{className:"headingCol",children:Object(c.jsxs)("div",{div:!0,className:"login-buttons",children:[Object(c.jsx)("div",{children:s?Object(c.jsx)(k,{loggedIn:s,setLoggedIn:function(e){return a(e)},setGoogleObj:function(e){return j(e)}}):Object(c.jsx)(P,{loggedIn:s,setLoggedIn:function(e){return a(e)},setGoogleObj:function(e){return j(e)}})}),Object(c.jsx)("div",{children:Object(c.jsxs)("p",{className:"headingText",children:["\xa0 ",s&&l?"Welcome back, ".concat(l.name,"!"):"Not logged in. Please log in.","\xa0"]})})]})})]}),Object(c.jsxs)(U.c,{children:[Object(c.jsx)(U.a,{exact:!0,path:"/",children:Object(c.jsx)(N,{googleObj:l,setAPI_id:function(e){return O(e)}})}),Object(c.jsx)(U.a,{exact:!0,path:"/Movie",children:Object(c.jsx)(M,{googleObj:l,API_id:v})}),Object(c.jsx)(U.a,{exact:!0,path:"/User",children:l?Object(c.jsx)(C,{googleObj:l,setAPI_id:function(e){return O(e)}}):Object(c.jsx)("p",{})}),Object(c.jsx)(U.a,{exact:!0,path:"/Search",children:Object(c.jsx)(F,{googleObj:l,setAPI_id:function(e){return O(e)}})})]})]})};n.a.render(Object(c.jsx)(W,{}),document.getElementById("root"))}},[[74,1,2]]]);
//# sourceMappingURL=main.2696b6db.chunk.js.map